{"version":3,"sources":["quad/input.cljs"],"mappings":"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","names":["var_args","G__34451","quad.input/setup-listener!","js/Error","obj","event-type","callback","args","js/window","G__34453","quad.input/listen","element","type","prevent-default?","out","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0","quad.input.setup_listener_BANG_.cljs$core$IFn$_invoke$arity$3","evt","cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2","quad.input.listen.cljs$core$IFn$_invoke$arity$3","quad.input/dispatcher","el","on-dispatch","c","quad.input.listen.cljs$core$IFn$_invoke$arity$2","c__25660__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__25661__auto__","switch__25543__auto__","state_34462","state_val_34463","statearr-34464","cljs.core.async.impl.ioc-helpers/take!","inst_34460","cljs.core.async.impl.ioc-helpers/return-chan","inst_34456","inst_34457","statearr-34465","statearr-34466","statearr-34467","state-machine__25544__auto__","ret-value__25545__auto__","result__25546__auto__","cljs.core/keyword-identical?","e34468","js/Object","ex__25547__auto__","statearr-34469","cljs.core.async.impl.ioc-helpers/process-exception","state__25662__auto__","statearr-34470","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","quad.input/mouse-move","on-move","quad.input/mouse-click","quad.input/mouse-down-move","btn","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2"],"sourcesContent":["(ns quad.input\n  (:require [cljs.core.async :as async]))\n\n(defn setup-listener!\n  ([obj event-type callback args]\n        (.addEventListener obj event-type callback args))\n  ([obj event-type callback]\n        (.addEventListener obj event-type callback))\n  ([event-type callback]\n               (.addEventListener js/window event-type callback)))\n\n(defn- listen\n  ([element type prevent-default?]\n            (let [out (async/chan)]\n              (setup-listener! element type (fn [evt]\n                                              (when prevent-default?\n                                                (.preventDefault evt))\n                                              (async/put! out evt)))\n              out))\n  ([element type]\n            (listen element type false)))\n\n(defn- dispatcher\n  [el type on-dispatch]\n  (let [c (listen el type)]\n    (async/go-loop [] (let [i (async/<! c)]\n                        (on-dispatch i)\n                        (recur)))))\n\n(defn mouse-move [el on-move] (dispatcher el \"mousemove\" on-move))\n(defn mouse-click [el on-move] (dispatcher el \"click\" on-move))\n(defn mouse-down-move\n  [el on-move]\n  (dispatcher el \"mousemove\" (fn [evt]\n                               (let [btn (aget evt \"buttons\")]\n                                 (when (= 1 btn) ;; left btn\n                                   (on-move evt))))))\n"]}